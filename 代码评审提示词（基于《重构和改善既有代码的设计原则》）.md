# 代码评审提示词（基于重构和改善既有代码的设计原则》）

## 一、代码基本要素检查
### （一）命名规范
1. 函数、类、变量和参数的命名应清晰且具有描述性，准确反映其用途和功能，避免使用无意义的缩写或随意的名称。例如，避免使用 `tmp`、`x` 等作为变量名，应使用如 `customerName`、`calculateTotalPrice` 等有明确含义的名称。
2. 类名应为名词或名词短语，使用驼峰命名法，首字母大写，如 `CustomerOrder`。
3. 函数名应为动词或动词短语，同样使用驼峰命名法，首字母小写，如 `processPayment`。
4. 常量名应全部大写，单词之间用下划线分隔，如 `MAX_ORDER_COUNT`。

### （二）注释与文档
1. 代码中应包含必要的注释，解释复杂的逻辑、算法或特殊的处理流程。注释应简洁明了，避免注释过于冗长或与代码重复。
2. 对于公共的类、函数和方法，应提供 Javadoc 注释，描述其功能、参数、返回值和可能抛出的异常。

### （三）代码格式
1. 代码应遵循一致的缩进风格，建议使用四个空格进行缩进。
2. 合理使用空行来分隔不同的逻辑块，提高代码的可读性。
3. 运算符和操作数之间应适当添加空格，如 `int result = a + b;`。

## 二、函数与方法评审
### （一）单一职责原则
1. 每个函数和方法应只负责一个明确的功能，避免一个函数承担过多的职责。如果一个函数过长或承担了多个不同的任务，应将其拆分成多个更小的函数。
2. 函数的长度应尽量控制在合理范围内，一般不超过 50 行代码。如果函数过长，应考虑进行提炼和拆分。

### （二）参数处理
1. 函数的参数数量应尽量少，避免出现过长的参数列表。如果参数过多，可以考虑将相关的参数封装成一个对象。
2. 避免使用输出参数，尽量通过返回值来传递结果。
3. 参数应进行必要的校验，确保其合法性和有效性。如果参数不合法，应抛出合适的异常。

### （三）返回值与异常处理
1. 函数的返回值应明确，避免返回 `null`。如果确实需要表示没有结果，可以考虑使用 `Optional` 类型。
2. 函数应正确处理可能出现的异常，避免异常在函数内部被忽略。对于无法处理的异常，应向上抛出，并在 Javadoc 中进行说明。

### （四）代码复用与内聚性
1. 避免代码重复，对于重复的代码逻辑，应提取成独立的函数或方法进行复用。
2. 函数和方法应具有高内聚性，即函数内部的代码应该紧密相关，共同完成一个明确的任务。

## 三、类与对象评审
### （一）单一职责原则
1. 每个类应只负责一个明确的职责，避免一个类承担过多的功能。如果一个类的职责过于复杂，应将其拆分成多个更小的类。
2. 类的规模应适中，避免出现过大的类。如果一个类包含过多的字段和方法，应考虑进行拆分。

### （二）封装性
1. 类的字段应尽量使用私有访问修饰符，通过公共的访问器方法（getter 和 setter）来访问和修改字段的值。
2. 避免直接暴露类的内部实现细节，只提供必要的公共接口。

### （三）继承与多态
1. 继承关系应合理使用，子类应是父类的一种特殊类型，遵循里氏替换原则。避免滥用继承，导致类之间的耦合度过高。
2. 利用多态来实现代码的灵活性和可扩展性，通过抽象类和接口来定义通用的行为，让具体的子类实现不同的功能。

### （四）依赖注入
1. 类应尽量减少对其他类的直接依赖，通过依赖注入的方式来获取所需的对象。可以使用构造函数注入、方法注入或属性注入等方式。
2. 避免在类内部创建具体的对象实例，而是通过接口来引用对象，提高代码的可测试性和可维护性。

## 四、数据结构与算法评审
### （一）数据结构选择
1. 根据实际需求选择合适的数据结构，如数组、列表、集合、映射等。避免使用不恰当的数据结构导致性能问题。
2. 对于频繁进行查找操作的数据，应使用合适的查找算法和数据结构，如哈希表、二叉搜索树等。

### （二）算法复杂度
1. 分析代码中使用的算法的时间复杂度和空间复杂度，尽量选择复杂度较低的算法。避免使用时间复杂度为指数级或阶乘级的算法。
2. 对于大规模数据的处理，应考虑算法的性能优化，如使用分治法、动态规划等算法。

## 五、代码耦合与内聚评审
### （一）低耦合性
1. 类与类之间、模块与模块之间的耦合度应尽量低，避免出现过度依赖的情况。可以通过接口、抽象类和依赖注入等方式来降低耦合度。
2. 避免在一个类中直接调用另一个类的具体实现方法，而是通过接口来进行交互。

### （二）高内聚性
1. 类和模块应具有高内聚性，即内部的代码应该紧密相关，共同完成一个明确的任务。避免将不相关的功能放在同一个类或模块中。

## 六、错误处理与异常情况评审
### （一）异常处理
1. 代码应正确处理可能出现的异常，避免异常在系统中蔓延。对于不同类型的异常，应进行不同的处理，如记录日志、进行重试或向用户反馈错误信息。
2. 避免捕获过于宽泛的异常，如 `Exception` 或 `Throwable`，应捕获具体的异常类型，并进行针对性的处理。

### （二）边界条件处理
1. 代码应考虑各种边界条件，如空指针、数组越界、除数为零等情况，并进行相应的处理。
2. 对于输入参数的边界值，应进行严格的校验，确保系统的稳定性和可靠性。

## 七、性能与资源管理评审
### （一）性能优化
1. 分析代码的性能瓶颈，对于频繁执行的代码块，应进行性能优化。可以通过算法优化、数据结构优化或缓存机制等方式来提高性能。
2. 避免不必要的对象创建和销毁，减少内存开销。可以使用对象池、缓存等技术来复用对象。

### （二）资源管理
1. 对于使用的资源，如文件、数据库连接、网络连接等，应及时进行释放和关闭。可以使用 `try-with-resources` 语句来确保资源的正确关闭。
2. 避免资源泄漏，如未关闭的文件句柄、未释放的数据库连接等情况。

## 八、测试与可维护性评审
### （一）可测试性
1. 代码应具有良好的可测试性，函数和方法应尽量独立，避免依赖外部环境和全局变量。
2. 为代码编写单元测试用例，覆盖各种正常和异常情况，确保代码的正确性和稳定性。

### （二）可维护性
1. 代码应具有良好的可维护性，结构清晰，逻辑简单。避免使用过于复杂的嵌套和递归结构。
2. 对于复杂的业务逻辑，应添加必要的注释和文档，方便后续的维护和扩展。